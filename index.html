<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ProBMS Dashboard</title>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#070517;
      --bg2:#120a2a;
      --card:#0e0a1f;
      --stroke:rgba(255,255,255,.08);
      --text:#f1f5f9;
      --muted:rgba(241,245,249,.72);
      --mauve:#b55cff;
      --mauve2:#7c3aed;
      --mauve3:#e879f9;
      --good:#22c55e;
      --warn:#f97316;
      --bad:#ef4444;
      --cyan:#38bdf8;
      --shadow: 0 25px 70px rgba(0,0,0,.55);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Cairo',Tahoma,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(181,92,255,.25), transparent 60%),
        radial-gradient(900px 600px at 85% 20%, rgba(232,121,249,.18), transparent 55%),
        radial-gradient(700px 500px at 50% 90%, rgba(124,58,237,.18), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
    }

    .wrap{
      max-width:1200px;
      margin:0 auto;
      padding:22px 18px 40px;
    }

    /* Top bar */
    .top{
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:space-between;
      padding:16px 16px;
      border:1px solid var(--stroke);
      border-radius:18px;
      background:linear-gradient(135deg, rgba(181,92,255,.10), rgba(14,10,31,.70));
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 220px;
    }

    .logo{
      width:44px;height:44px;
      border-radius:14px;
      display:grid;place-items:center;
      background:
        radial-gradient(18px 18px at 30% 30%, rgba(255,255,255,.35), transparent 60%),
        linear-gradient(135deg, var(--mauve), var(--mauve2));
      box-shadow:0 10px 25px rgba(181,92,255,.35);
      border:1px solid rgba(255,255,255,.12);
      font-weight:900;
    }

    .brand h1{
      margin:0;
      font-size:18px;
      line-height:1.1;
      font-weight:900;
    }
    .brand small{
      display:block;
      margin-top:2px;
      color:var(--muted);
      font-weight:600;
      font-size:12px;
    }

    .actions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .pill{
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.04);
      padding:10px 12px;
      border-radius:14px;
      color:var(--muted);
      font-size:12px;
      display:flex;
      gap:8px;
      align-items:center;
    }

    .btn{
      border:none;
      cursor:pointer;
      font-family:'Cairo',Tahoma;
      font-weight:800;
      padding:10px 14px;
      border-radius:14px;
      color:white;
      background: linear-gradient(135deg, var(--mauve), var(--mauve2));
      box-shadow:0 12px 30px rgba(181,92,255,.25);
      transition:.18s ease;
      border:1px solid rgba(255,255,255,.10);
    }
    .btn:hover{ transform: translateY(-2px); }
    .btn:active{ transform: translateY(0px); }

    .btn.secondary{
      background: rgba(255,255,255,.05);
      box-shadow:none;
      color:var(--text);
    }

    /* KPI */
    .kpis{
      margin-top:18px;
      display:grid;
      gap:14px;
      grid-template-columns: repeat(4, minmax(0,1fr));
    }
    .kpi{
      border:1px solid var(--stroke);
      background: rgba(14,10,31,.60);
      border-radius:18px;
      padding:14px;
      box-shadow: 0 20px 45px rgba(0,0,0,.35);
      position:relative;
      overflow:hidden;
    }
    .kpi::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(400px 120px at 20% 20%, rgba(181,92,255,.22), transparent 60%);
      pointer-events:none;
    }
    .kpi .t{ color:var(--muted); font-size:12px; font-weight:700; position:relative;}
    .kpi .v{ font-size:20px; font-weight:900; margin-top:6px; position:relative;}
    .kpi .tag{
      position:absolute;
      left:12px;
      top:12px;
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color: var(--muted);
    }

    /* Grid cards */
    .grid{
      margin-top:18px;
      display:grid;
      gap:14px;
      grid-template-columns: repeat(3, minmax(0,1fr));
    }

    .card{
      border:1px solid var(--stroke);
      background: linear-gradient(135deg, rgba(181,92,255,.10), rgba(14,10,31,.70));
      border-radius:22px;
      padding:18px;
      box-shadow: 0 25px 60px rgba(0,0,0,.35);
      cursor:pointer;
      transition: .18s ease;
      position:relative;
      overflow:hidden;
      min-height: 140px;
    }
    .card::after{
      content:"";
      position:absolute;
      width:220px;height:220px;
      border-radius:50%;
      right:-120px; top:-120px;
      background: radial-gradient(circle at 30% 30%, rgba(232,121,249,.25), rgba(124,58,237,.15) 45%, transparent 70%);
      pointer-events:none;
    }
    .card:hover{ transform: translateY(-4px); }
    .card:active{ transform: translateY(-1px); }

    .row{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      position:relative;
    }

    .ico{
      width:46px;height:46px;
      border-radius:16px;
      display:grid;place-items:center;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      font-size:22px;
      flex:0 0 auto;
    }

    .title{
      margin:0;
      font-size:18px;
      font-weight:900;
    }
    .desc{
      margin:6px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
    }

    .go{
      margin-top:14px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:900;
      color:#fff;
      background: rgba(181,92,255,.18);
      border:1px solid rgba(181,92,255,.25);
      padding:8px 12px;
      border-radius:999px;
      font-size:12px;
      position:relative;
    }

    /* Small helper */
    .note{
      margin-top:14px;
      color:var(--muted);
      font-size:12px;
      text-align:center;
    }

    footer{
      margin-top:22px;
      text-align:center;
      font-size:12px;
      color:rgba(241,245,249,.55);
    }

    /* Responsive */
    @media (max-width: 980px){
      .kpis{ grid-template-columns: repeat(2, minmax(0,1fr)); }
      .grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    }
    @media (max-width: 560px){
      .top{ flex-direction:column; align-items:stretch; }
      .actions{ justify-content:space-between; }
      .grid{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="top">
      <div class="brand">
        <div class="logo">BM</div>
        <div>
          <h1>ProBMS â€¢ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
          <small>ÙˆØ§Ø¬Ù‡Ø© Ø°ÙƒÙŠØ© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ù† Ø¨Ø¹Ø¯</small>
        </div>
      </div>

      <div class="actions">
        <div class="pill" id="now">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</div>
        <button class="btn secondary" onclick="location.reload()">ØªØ­Ø¯ÙŠØ«</button>
        <button class="btn" onclick="go('vente.html')">Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ âœ Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…</button>
      </div>
    </div>

    <!-- KPIs (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© / Ù…Ø¤Ù‚ØªØ§Ù‹ Ù‚ÙŠÙ… Ø«Ø§Ø¨ØªØ©) -->
    <div class="kpis">
      <div class="kpi">
        <div class="tag">Ø§Ù„ÙŠÙˆÙ…</div>
        <div class="t">ÙØ§Ø¦Ø¯Ø© Ø§Ù„ÙŠÙˆÙ…</div>
        <div class="v" id="kpiBenef">â€”</div>
      </div>
      <div class="kpi">
        <div class="tag">Ø§Ù„ÙŠÙˆÙ…</div>
        <div class="t">Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ù„Ø¹</div>
        <div class="v" id="kpiArticles">â€”</div>
      </div>
      <div class="kpi">
        <div class="tag">Ø§Ù„ÙŠÙˆÙ…</div>
        <div class="t">Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
        <div class="v" id="kpiVente">â€”</div>
      </div>
      <div class="kpi">
        <div class="tag">Ø§Ù„ÙŠÙˆÙ…</div>
        <div class="t">Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
        <div class="v" id="kpiAchat">â€”</div>
      </div>
    </div>

    <div class="grid">

      <!-- 1: Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ… -->
      <div class="card" onclick="go('vente.html')">
        <div class="row">
          <div>
            <h3 class="title">Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h3>
            <p class="desc">ÙØ§Ø¦Ø¯Ø© Ø§Ù„ÙŠÙˆÙ… + ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ù„Ø¹ Ù…Ø¹ ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ø®Ø³Ø§Ø±Ø©.</p>
            <span class="go">ÙØªØ­ Ø§Ù„ØµÙØ­Ø© âŸµ</span>
          </div>
          <div class="ico">ğŸ’°</div>
        </div>
      </div>

      <!-- 2 -->
      <div class="card" onclick="go('versements.html')">
        <div class="row">
          <div>
            <h3 class="title">ØªØ³Ø¯ÙŠØ¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h3>
            <p class="desc">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ³Ø¯ÙŠØ¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ù…Ø¹ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ù„Øº.</p>
            <span class="go">ÙØªØ­ Ø§Ù„ØµÙØ­Ø© âŸµ</span>
          </div>
          <div class="ico">ğŸ’µ</div>
        </div>
      </div>

      <!-- 3 -->
      <div class="card" onclick="go('credits.html')">
        <div class="row">
          <div>
            <h3 class="title">Ø¯ÙŠÙˆÙ† Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†</h3>
            <p class="desc">Ø£ÙƒØ¨Ø± Ø§Ù„Ø¯ÙŠÙˆÙ† + ØªØ±ØªÙŠØ¨ ØªÙ†Ø§Ø²Ù„ÙŠ + Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹.</p>
            <span class="go">ÙØªØ­ Ø§Ù„ØµÙØ­Ø© âŸµ</span>
          </div>
          <div class="ico">ğŸ“‰</div>
        </div>
      </div>

      <!-- 4 -->
      <div class="card" onclick="go('clients.html')">
        <div class="row">
          <div>
            <h3 class="title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†</h3>
            <p class="desc">Ù‚Ø§Ø¦Ù…Ø© ÙƒØ§Ù…Ù„Ø© Ø¨Ø§Ù„Ø²Ø¨Ø§Ø¦Ù† + Ø§Ù„Ù‡Ø§ØªÙ + Ø§Ù„Ø±ØµÙŠØ¯.</p>
            <span class="go">ÙØªØ­ Ø§Ù„ØµÙØ­Ø© âŸµ</span>
          </div>
          <div class="ico">ğŸ‘¥</div>
        </div>
      </div>

      <!-- 5 -->
      <div class="card" onclick="go('top50.html')">
        <div class="row">
          <div>
            <h3 class="title">Ø£ÙØ¶Ù„ 50 Ù…Ù†ØªØ¬ Ù…Ø¨ÙŠØ¹Ø§Ù‹</h3>
            <p class="desc">Top 50 Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø± Ø­Ø³Ø¨ Ø§Ù„ÙƒÙ…ÙŠØ© Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ø£Ø¹Ù…Ø§Ù„.</p>
            <span class="go">ÙØªØ­ Ø§Ù„ØµÙØ­Ø© âŸµ</span>
          </div>
          <div class="ico">ğŸ”¥</div>
        </div>
      </div>

      <!-- 6 -->
      <div class="card" onclick="go('seuil.html')">
        <div class="row">
          <div>
            <h3 class="title">Ø³Ù„Ø¹ Ø§Ù„Ø¹ØªØ¨Ø©</h3>
            <p class="desc">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† Ø§Ù„Ù†ÙØ§Ø¯ (Alert Stock).</p>
            <span class="go">ÙØªØ­ Ø§Ù„ØµÙØ­Ø© âŸµ</span>
          </div>
          <div class="ico">âš ï¸</div>
        </div>
      </div>

      <!-- 7 -->
      <div class="card" onclick="go('articles.html')">
        <div class="row">
          <div>
            <h3 class="title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù„Ø¹</h3>
            <p class="desc">ÙƒÙ„ Ø§Ù„Ø³Ù„Ø¹ ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ (Ø¥Ù† ÙˆØ¬Ø¯).</p>
            <span class="go">ÙØªØ­ Ø§Ù„ØµÙØ­Ø© âŸµ</span>
          </div>
          <div class="ico">ğŸ“¦</div>
        </div>
      </div>

    </div>

    <div class="note">
      âœ… Ù†ØµÙŠØ­Ø©: Ø³Ù…Ù‘ ØµÙØ­Ø© Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø§Ø³Ù… <b>vente.html</b> ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯.
    </div>

    <footer>
      ProBMS Â© www.bmsoftdev.com â€” 06.62.54.14.86 / 07.76.07.77.94
    </footer>

  </div>

<script>
  // Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù€ JSON (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ù…Ù„Ø¡ KPIs ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)
  const SALES_URL = "https://script.google.com/macros/s/AKfycbxP_4032GotENPZFkHz1ooJ1mD6gnwJxSn9riBeE_5z7i7qgI3OtAtFqsffMJt9m3IbaA/exec";

  function go(page){ window.location.href = page; }

  function format00(n){
    return Number(n).toFixed(2);
  }

  // ÙˆÙ‚Øª Ø§Ù„Ø¢Ù†
  function setNow(){
    const d = new Date();
    const pad = x => String(x).padStart(2,'0');
    document.getElementById("now").innerText =
      "ğŸ•’ " + pad(d.getHours()) + ":" + pad(d.getMinutes()) + ":" + pad(d.getSeconds()) +
      " | ğŸ“… " + d.getFullYear() + "-" + pad(d.getMonth()+1) + "-" + pad(d.getDate());
  }
  setNow(); setInterval(setNow, 1000);

  // Ù…Ù„Ø¡ KPIs Ù…Ù† Ù†ÙØ³ JSON ØªØ§Ø¹ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  fetch(SALES_URL)
    .then(r => r.json())
    .then(data => {
      // Ø¥Ø°Ø§ JSON ÙÙŠÙ‡ achat/vente/benefice/articles
      document.getElementById("kpiBenef").innerText = format00(data.benefice) + " Ø¯Ø¬";
      document.getElementById("kpiArticles").innerText = data.articles ?? "â€”";
      document.getElementById("kpiVente").innerText = format00(data.vente ?? 0) + " Ø¯Ø¬";
      document.getElementById("kpiAchat").innerText = format00(data.achat ?? 0) + " Ø¯Ø¬";

      // Ù„ÙˆÙ† KPI ÙØ§Ø¦Ø¯Ø© Ø§Ù„ÙŠÙˆÙ…
      if ((data.benefice ?? 0) < 0){
        document.getElementById("kpiBenef").style.color = "#f97316";
      } else {
        document.getElementById("kpiBenef").style.color = "#22c55e";
      }
    })
    .catch(()=>{ /* ØªØ¬Ø§Ù‡Ù„ ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ØªÙˆÙØ± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª */ });
</script>

</body>
</html>
